cwlVersion: v1.0
class: Workflow

label: Pre-process Radia results
doc: Filter, sort, and normalize VCF files generated by Radia

requirements:
  - class: StepInputExpressionRequirement

inputs:
  vcf:
    type: File
  seqdict:
    type: File

outputs:
  output_vcf:
    type: File
    outputSource: normalize/output_vcf

steps:
  filter:
    in:
      vcf: vcf
      output_name:
        valueFrom: radia.filtered.vcf
    out: [output_vcf]
    run: ../filter_radia/tool.cwl.yaml

  sort:
    in:
      seqdict: seqdict
      vcf: filter/output_vcf
      output_name:
        valueFrom: radia.sorted.vcf
    out: [output_vcf]
    run: ../sort_vcf/tool.cwl.yaml

  normalize:
    in:
      vcf: sort/output_vcf
      output_name:
        valueFrom: radia.normalized.vcf
      vcf_tumor_id:
        valueFrom: TODO
      vcf_normal_id:
        valueFrom: TODO
    out: [output_vcf]
    run: ../vcf2maf/vcf2vcf.cwl.yaml
