cwlVersion: v1.0
class: Workflow

label: Pre-process Somaticsniper vcf
doc: Filter, sort, and normalize VCF files generated by Somaticsniper

inputs:
  vcf:
    type: File
  seqdict:
    type: File
  normal_id:
    type: string
  tumor_id:
    type: string

outputs:
  output_vcf:
    type: File
    outputSource: normalize/output_vcf

steps:
  filter:
    in:
      vcf: vcf
      normal_id: normal_id
      tumor_id: tumor_id
    out: [output_vcf]
    run: ../filter_somaticsniper/tool.cwl.yaml

  sort:
    in:
      seqdict: seqdict
      vcf: filter/output_vcf
      output_name:
        valueFrom: somaticsniper.sorted.vcf
    out: [output_vcf]
    run: ../sort_vcf/tool.cwl.yaml

  normalize:
    in:
      vcf: sort/output_vcf
      output_name:
        valueFrom: somaticsniper.normalized.vcf
      vcf_tumor_id:
        valueFrom: TODO
      vcf_normal_id:
        valueFrom: TODO
    out: [output_vcf]
    run: ../vcf2maf/vcf2vcf.cwl.yaml
